<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网易云资料卡</title>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body>
    <div class="box1">
        <div class="box1_left">
            <img src="img/18.png" alt="返回">
        </div>
        <div class="box1_right">
            <img src="img/17.png" alt="设置">
        </div>
    </div>
    
    <div class="box2">
        <img src="img/image7.png" class="avatar" id="avatar" alt="用户头像">
    </div>
    
    <div class="box3">
        <div class="name" id="usernameText">人才</div>
        <img src="img/21.GIF" class="responsive-gif" width="70" alt="vip图标" id="vipIcon">
    </div>
    
    <div class="user-stats">
        <div class="stat-item">
            <span class="count" id="followCount">0</span>
            <span class="label">关注</span>
        </div>
        <div class="stat-item">
            <span class="count" id="fansCount">0</span>
            <span class="label">粉丝</span>
        </div>
        <div class="stat-item">
            <span class="level">Lv.<span id="levelNumber">1</span></span>
        </div>
        <div class="stat-item">
            <span class="count" id="listenTime">567</span>
            <span class="label">小时</span>
        </div>
    </div>
    
    <div class="box4">
        <div class="box4-item">
            <img src="img/1.png" width="20px" class="c1" alt="最近">
            <span>最近</span>
        </div>
        <div class="box4-item">
            <img src="img/2.PNG" class="c2" alt="本地">
            <span>本地</span>
        </div>
        <div class="box4-item">
            <img src="img/3.PNG" class="c3" alt="网盘">
            <span>网盘</span>
        </div>
        <div class="box4-item">
            <img src="img/4.png" class="c4" alt="装扮">
            <span>装扮</span>
        </div>
		<div class="box4-item">
			<div class="box4-item-iop">
			    <img src="img/5.PNG" alt="更多">
		</div>
        
        </div>
    </div>
    
    <div class="box5">
        <div class="item">音乐</div>
        <div class="item">播客</div>
        <div class="item">笔记</div>
    </div>
    
    <div class="box6">
        <div class="box6-top">
            <div class="box6-type">全部</div>
        </div>
        
        <div class="box6-profile">
            <img id="box6-avatar" src="img/image7.png" alt="头像" class="box6-img">
            <div class="box6-userinfo"></div>
            <div class="user-details">
                <div id="box6-username" class="box6-name">人才</div>
                <div id="box6-time" class="box6-time">11:11</div>
                <div id="box6-custom" class="box6-custom">1</div>
            </div>
        </div>
        
        <div class="box6-actions">
            <div class="box6-action">
                <img src="img/90.png" alt="分享" width="20">
                <span>分享</span>
            </div>
            <div class="box6-action">
                <img src="img/91.png" alt="评论" width="20">
                <span>评论</span>
            </div>
            <div class="box6-action">
                <img src="img/92.png" alt="点赞" width="20">
                <span>点赞</span>
            </div>
        </div>
        
        <div id="box6-bottom">已经刷到底啦</div>
    </div>
	
    
    <div class="box7">
        <button id="editButton" class="float-action-btn">
            <img src="img/41.png" width="50px" alt="编辑">
        </button>
    </div>
    
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <form id="editForm">
                <div class="form-group">
                    <label for="avatarInput">头像:</label>
                    <input type="file" id="avatarInput" accept="image/*">
                </div>
                
                <div class="form-group">
                    <label for="nameInput">名字：</label>
                    <input type="text" id="nameInput" placeholder="输入新名字">
                </div>
                
                <div class="form-group">
                    <label for="timeInput">时间：</label>
                    <input type="time" id="timeInput" step="1">
                </div>
                
                <div class="form-group">
                    <label for="customInput">自定义内容：</label>
                    <input type="text" id="customInput" placeholder="输入自定义内容">
                </div>
                
                <div class="form-group">
                    <label>用户数据：</label>
                    <div class="stats-group">
                        <div class="form-group">
                            <label for="followInput">关注：</label>
                            <input type="text" id="followInput" placeholder="关注数">
                        </div>
                        
                        <div class="form-group">
                            <label for="fansInput">粉丝：</label>
                            <input type="text" id="fansInput" placeholder="粉丝数">
                        </div>
                        
                        <div class="form-group">
                            <label for="levelInput">等级：</label>
                            <div class="level-input-group">
                                <span>Lv.</span>
                                <input type="text" id="levelInput" placeholder="等级数字">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="listenInput">听歌时长：</label>
                            <input type="text" id="listenInput" placeholder="小时数">
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>选择vip图标：</label>
                    <div class="vip-icons">
                        <label class="vip-icon">
                            <input type="radio" name="vipIcon" value="img/21.GIF" hidden>
                            <img src="img/21.GIF" alt="vip图标1">
                        </label>
                        <label class="vip-icon">
                            <input type="radio" name="vipIcon" value="img/22.GIF" hidden>
                            <img src="img/22.GIF" alt="vip图标2">
                        </label>
                        <label class="vip-icon">
                            <input type="radio" name="vipIcon" value="img/23.GIF" hidden>
                            <img src="img/23.GIF" alt="vip图标3">
                        </label>
                    </div>
                </div>
                
                <input type="submit" value="保存" class="save-button">
            </form>
        </div>
    </div>
    <div class="tabbar">
        <div class="tab-item">
            <img src="img/31.PNG" alt="推荐">
            <span>推荐</span>
        </div>
        <div class="tab-item">
            <img src="img/32.PNG" alt="漫游">
            <span>漫游</span>
        </div>
        <div class="tab-item">
            <img src="img/33.PNG" alt="笔记">
            <span>笔记</span>
        </div>
        <div class="tab-item">
            <img src="img/34.PNG" alt="我的">
            <span>我的</span>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM元素引用
            const usernameText = document.getElementById('usernameText');
            const box6Username = document.getElementById('box6-username');
            const avatarImg = document.getElementById('avatar');
            const box6Avatar = document.getElementById('box6-avatar');
            const vipIcon = document.getElementById('vipIcon');
            const timeElement = document.getElementById('box6-time');
            const customElement = document.getElementById('box6-custom');
            
            // 用户数据元素
            const followCount = document.getElementById('followCount');
            const fansCount = document.getElementById('fansCount');
            const levelNumber = document.getElementById('levelNumber');
            const listenTime = document.getElementById('listenTime');
            
            // 编辑弹窗元素
            const editButton = document.getElementById('editButton');
            const modal = document.getElementById('editModal');
            const closeBtn = document.querySelector('.close');
            const avatarInput = document.getElementById('avatarInput');
            const editForm = document.getElementById('editForm');
            
            // 新增的用户数据输入框
            const followInput = document.getElementById('followInput');
            const fansInput = document.getElementById('fansInput');
            const levelInput = document.getElementById('levelInput');
            const listenInput = document.getElementById('listenInput');
            
            // 初始化用户数据
            customElement.textContent = '1';
            
            // 从localStorage加载数据
            const savedName = localStorage.getItem('username');
            if (savedName) {
                usernameText.textContent = savedName;
                box6Username.textContent = savedName;
            }
            
            const savedAvatar = localStorage.getItem('avatar');
            if (savedAvatar) {
                avatarImg.src = savedAvatar;
                box6Avatar.src = savedAvatar;
            }
            
            const savedVipIcon = localStorage.getItem('vipIcon');
            if (savedVipIcon) {
                vipIcon.src = savedVipIcon;
                const radio = document.querySelector(`input[value="${savedVipIcon}"]`);
                if (radio) radio.checked = true;
            }
            
            const savedTime = localStorage.getItem('userTime');
            if (savedTime) {
                timeElement.textContent = savedTime;
            }
            
            const savedCustom = localStorage.getItem('customContent');
            if (savedCustom) {
                customElement.textContent = savedCustom;
            }
            
            // 加载用户数据
            const savedFollow = localStorage.getItem('followCount');
            if (savedFollow) {
                followCount.textContent = savedFollow;
            }
            
            const savedFans = localStorage.getItem('fansCount');
            if (savedFans) {
                fansCount.textContent = savedFans;
            }
            
            const savedLevel = localStorage.getItem('userLevel');
            if (savedLevel) {
                levelNumber.textContent = savedLevel;
            }
            
            const savedListen = localStorage.getItem('listenTime');
            if (savedListen) {
                listenTime.textContent = savedListen;
            }
            
            // 打开编辑弹窗
            editButton.addEventListener('click', function() {
                modal.style.display = 'block';
                document.getElementById('nameInput').value = usernameText.textContent;
                document.getElementById('timeInput').value = timeElement.textContent || '';
                document.getElementById('customInput').value = customElement.textContent;
                
                // 设置用户数据输入框的值
                followInput.value = followCount.textContent;
                fansInput.value = fansCount.textContent;
                levelInput.value = levelNumber.textContent;
                listenInput.value = listenTime.textContent;
            });
            
            // 关闭编辑弹窗
            closeBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });
            
            // 点击模态框外部关闭
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            });
            
            // 表单提交处理
            editForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // 更新用户名
                const nameInput = document.getElementById('nameInput');
                const newName = nameInput.value.trim();
                if (newName) {
                    localStorage.setItem('username', newName);
                    usernameText.textContent = newName;
                    box6Username.textContent = newName;
                }
                
                // 更新头像
                if(avatarInput.files.length > 0) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const avatar = e.target.result;
                        localStorage.setItem("avatar", avatar);
                        avatarImg.src = avatar;
                        box6Avatar.src = avatar;
                    };
                    reader.readAsDataURL(avatarInput.files[0]);
                }
                
                // 更新VIP图标
                const selectedVipIcon = document.querySelector('input[name="vipIcon"]:checked');
                if (selectedVipIcon) {
                    const vipIconSrc = selectedVipIcon.value;
                    localStorage.setItem('vipIcon', vipIconSrc);
                    vipIcon.src = vipIconSrc;
                }
                
                // 更新时间
                const timeInput = document.getElementById('timeInput');
                const newTime = timeInput.value;
                if (newTime) {
                    localStorage.setItem('userTime', newTime);
                    timeElement.textContent = newTime;
                }
                
                // 更新自定义内容
                const customInput = document.getElementById('customInput');
                const newCustom = customInput.value.trim() || '一';
                localStorage.setItem('customContent', newCustom);
                customElement.textContent = newCustom;
                
                // 更新用户数据
                const newFollow = followInput.value.trim() || '0';
                localStorage.setItem('followCount', newFollow);
                followCount.textContent = newFollow;
                
                const newFans = fansInput.value.trim() || '0';
                localStorage.setItem('fansCount', newFans);
                fansCount.textContent = newFans;
                
                const newLevel = levelInput.value.trim() || '1';
                localStorage.setItem('userLevel', newLevel);
                levelNumber.textContent = newLevel;
                
                const newListen = listenInput.value.trim() || '567';
                localStorage.setItem('listenTime', newListen);
                listenTime.textContent = newListen;
                
                // 关闭模态框
                modal.style.display = 'none';
            });
        });
    </script>
</body>
</html>
